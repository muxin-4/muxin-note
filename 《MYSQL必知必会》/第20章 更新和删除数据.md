# 第20章 更新和删除数据

## 20.1 更新数据

举一个简单例子。客户10005 现在有了电子邮件地址，因此他的记录需要更新，语句如下：

```
UPDATE customers
SET cust_email = 'elmer@fudd.com'
WHERE cust_id = 10005;
```

UPDATE语句以WHERE子句结束，它告诉MySQL更新哪一行。



 更新多个列的语法稍有不同：

```
UPDATE customers
SET cust_name = 'The Fudds',
	cust_email = 'elmer@fudd.com'
WHERE cust_id = 10005;
```



为了删除某个列的值，可设置它为NULL （假如表定义允许NULL 值）。如下进行：

```
UPDATE customers
SET cust_email = NULL
WHERE cust_id = 10005;
```



## 20.2 删除数据

```
DELETE FROM customers
WHERE cust_id = 10006;
```

这条语句很容易理解。DELETE FROM 要求指定从中删除数据的表名。WHERE 子句过滤要删除的行。在这个例子中，只删除客户10006 。如果省略WHERE 子句，它将删除表中每个客户。

DELETE 不需要列名或通配符。DELETE 删除整行而不是删除列。



## 20.3 更新和删除的指导原则

- 除非确实打算更新和删除每一行，否则绝对不要使用不带WHERE 子句的UPDATE 或DELETE 语句。
- 保证每个表都有主键（如果忘记这个内容，请参阅第15 章），尽可能像WHERE 子句那样使用它（可以指定各主键、多个值或值的范围）。
- 在对UPDATE 或DELETE 语句使用WHERE 子句前，应该先用SELECT 进行测试，保证它过滤的是正确的记录，以防编写的WHERE 子句不正确。
- 使用强制实施引用完整性的数据库
- MySQL没有撤销（ undo）按钮。应该非常小心地使用UPDATE和DELETE，否则你会发现自己更新或删除了错误的数据。
































