# 第7章 数据过滤
> 本章讲授如何组合WHERE子句以建立功能更强的更高级的搜索条件。
>
> 我们还将学习如何使用NOT和IN操作符。

## 7.1 组合WHERE子句

第6 章中介绍的所有WHERE 子句在过滤数据时使用的都是单一的条件。为了进行更强的过滤控制，MySQL 允许给出多个WHERE 子句。

这些子句可以两种方式使用：以AND 子句的方式或OR 子句的方式使用。

### 7.1.1 AND操作符

为了通过不止一个列进行过滤，可使用AND 操作符给WHERE 子句附加条件。

```
SELECT prod_id, prod_price, prod_name
FROM products
WHERE vend_id = 1003 AND prod_price < = 10
```

此SQL 语句检索由供应商1003 制造且价格小于等于10 美元的所有产品的名称和价格。

### 7.1.2 OR操作符

OR操作符与AND操作符不同，它指示MySQL检索匹配任一条件的行。

```
SELECT prod_name, prod_price
FROM products
WHERE vend_id = 1002 OR vend_id = 1003;
```

此SQL 语句检索由任一个指定供应商制造的所有产品的产品名和价格。OR 操作符告诉DBMS 匹配任一条件而不是同时匹配两个条件。如果这里使用的是AND 操作符，则没有数据返回。

### 7.1.3 计算次序

> WHERE可包含任意数目的AND和OR操作符。允许两者结合以进行复杂和高级的过滤。

**计算次序排序**

圆括号优先级 > AND操作符优先级 > OR操作符优先级

```
SELECT prod_name, prod_price
FROM products
WHERE (vend_id = 1002 OR vend_id = 1003) AND prod_price >= 10;
```

因为AND操作符优先级比OR操作符优先级高，所以当AND和OR同时存在时，如果想OR操作符先执行，要使用圆括号把需要优先执行的部分包裹起来



## 7.2 IN操作符

IN 操作符用来指定条件范围，范围中的每个条件都可以进行匹配。

```
SELECT prod_name, prod_price
FROM products
WHERE vend_id IN (1002,1003)
ORDER BY prod_name;
```

 此SELECT 语句检索供应商1002 和1003 制造的所有产品。

**N操作符完成与OR相同的功能,下面的例子和上面的例子完全相同**

```
SELECT prod_name, prod_price
FROM products
WHERE vend_id = 1002 OR vend_id = 1003
ORDER BY prod_name;
```

为什么要使用IN 操作符？其优点具体如下。

-  在使用长的合法选项清单时，IN 操作符的语法更清楚且更直观。

-  在使用IN 时，计算的次序更容易管理（因为使用的操作符更少）。

- IN操作符一般比OR操作符清单执行更快。

- IN的最大优点是可以包含其他SELECT语句，使得能够更动态地建

  立WHERE子句。


## 7.3 NOT操作符

WHERE子句中的NOT操作符有且只有一个功能，那就是否定它之后所跟的任何条件。

下面的例子说明NOT 的使用。为了列出除1002和1003 之外的所有供应商制造的产品，可编写如下的代码：

```
SELECT prod_name, prod_price
FROM products
WHERE vend_id NOT IN (1002,1003)
ORDER BY prod_name;
```

**分析**

这里的NOT 否定跟在它之后的条件

**为什么使用NOT ？**

对于简单的WHERE 子句，使用NOT 确实没有什么优势。但在更复杂的子句中，NOT 是非常有用的。例如，在与IN 操作符联合使用时，NOT 使找出与条件列表不匹配的行非常简单。