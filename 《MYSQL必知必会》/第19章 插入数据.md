# 第19章 插入数据

>  本章介绍如何利用SQL 的INSERT 语句将数据插入表中。

## 19.1 数据插入

 INSERT 是用来插入（或添加）行到数据库表的。插入可以用几种方式使用：

*  插入完整的行；
*  插入行的一部分；
*  插入多行；
*  插入某些查询的结果。

**插入及系统安全**

可针对每个表或每个用户，利用MySQL 的安全机制禁止使用INSERT 语句。

## 19.2 插入完整的行

把数据插入表中的最简单的方法是使用基本的INSERT 语法，它要求指定表名和被插入到新行中的值。

```
INSERT INTO Customers
VALUES(NULL,
	'Pep E. LaPew',
	'100 Main Street',
	'Los Angeles',
	'CA',
	'90046',
	'USA',
	 NULL,
	 NULL);
```

**INSERT语句一般不会产生输出。**

此例子插入一个新客户到customers 表。存储到每个表列中的数据在VALUES 子句中给出，对每个列必须提供一个值。如果某个列没有值（如上面的cust_contact 和cust_email 列），应该使用NULL值（假定表允许对该列指定空值）。各个列必须以它们在表定义中出现的次序填充。



**虽然这种语法很简单，但并不安全，应该尽量避免使用。上面的SQL语句高度依赖于表中列的定义次序，并且还依赖于其次序容易获得的信息。即使可得到这种次序信息，也不能保证下一次表结构变动后各个列保持完全相同的次序。**

编写INSERT 语句的更安全（不过更烦琐）的方法如下：

```
INSERT INTO customers(cust_name,
	cust_address,
	cust_city,
	cust_state,
	cust_zip,
	cust_country,
	cust_contact,
	cust_email)
	VALUES('Pep E. LaPew',
	'100 Main Street',
	'Los Angeles',
	'CA',
	'90046',
	'USA',
	 NULL,
	 NULL);
```

此例子完成与前一个INSERT 语句完全相同的工作，但在表名后的括号里明确地给出了列名。在插入行时，MySQL 将用VALUES列表中的相应值填入列表中的对应项。VALUES 中的第一个值对应于第一个指定的列名。第二个值对应于第二个列名，如此等等。

因为提供了列名，VALUES 必须以其指定的次序匹配指定的列名，不一定按各个列出现在实际表中的次序。其优点是，即使表的结构改变，此INSERT 语句仍然能正确工作。你会发现cust_id 的NULL 值是不必要的，cust_id 列并没有出现在列表中，所以不需要任何值。



* **总是使用列的列表**

一般不要使用没有明确给出列的列表的INSERT 语句。使用列的列表能使SQL 代码继续发挥作用，即使表结构发生了变化。

* **仔细地给出值**

不管使用哪种INSERT 语法，都必须给出VALUES 的正确数目。如果不提供列名，则必须给每个表列提供一个值。如果提供列名，则必须对每个列出的列给出一个值。如果不这样，将产生一条错误消息，相应的行插入不成功。

* **省略列**

如果表的定义允许，则可以在INSERT 操作中省略某些列。省略的列必须满足以下某个条件。

1. 该列定义为允许NULL 值（无值或空值）。
2.  在表定义中给出默认值。这表示如果不给出值，将使用默认值。

  如果对表中不允许NULL 值且没有默认值的列不给出值，则MySQL 将产生一条错误消息，并且相应的行插入不成功。

* **提高整体性能**

数据库经常被多个客户访问，对处理什么请求以及用什么次序处理进行管理是MySQL 的任务。INSERT 操作可能很耗时（特别是有很多索引需要更新时），而且它可能降低等待处理的SELECT 语句的性能。

如果数据检索是最重要的（通常是这样），则你可以通过在INSERT 和INTO 之间添加关键字LOW_PRIORITY ，指示MySQL降低INSERT 语句的优先级，如下所示：

`INSERT LOW_PRIORITY INTO`

这也适用于UPDATE 和DELETE 语句。