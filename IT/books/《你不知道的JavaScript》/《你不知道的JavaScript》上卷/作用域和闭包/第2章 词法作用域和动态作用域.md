# 第2章 词法作用域和静态作用域
>JS采用的是词法作用域, 什么语言采用了动态作用域呢？

## 2.1词法作用域与动态作用域

词法作用域又叫动态作用域，函数的作用域是由书写代码时函数声明的位置来决定的。
而与词法作用域对应的静态作用域，函数的作用域是在函数调用的时候才决定的。


大部分标准语言编译器的第一个工作阶段叫做词法化(也叫单词化)。
简单讲，词法作用域就是定义在词法阶段的作用域。

我们认真看下面这个例子就能明白词法作用域：

```js
var a = 2;
function foo() {
  console.log(a); // 会输出2还是3？
}
function bar() {
  var a = 3;
  foo();
}
bar();
```

假设js采用静态作用域，我们分析执行过程：

执行foo函数，先从foo函数创建的作用中查找局部变量a，如果没有，就根据书写位置，查找上面一层的代码，这里foo函数书写位置的上一层是var a = 2;，var a = 2所在的作用域是全局作用域，也就是a 等于 2，所以打印2。

假设JavaScript采用动态作用域，让我们分析执行过程：

执行foo函数，先从foo函数创建的作用中查找局部变量a，如果没有，就根据调用函数的作用域，这里调用foo函数的函数是bar，在bar函数内部查找局部变量a，也就是a 等于 3，所以打印3。



词法作用域包含四种子作用域

* 全局作用域
* 当前作用域
* 函数作用域
* 块作用域

## 动态作用域
大多数编程语言采用词法作用域，但仍有一些编程语言采用动态作用域(比如Bash脚本，Perl中的一些模式等)。