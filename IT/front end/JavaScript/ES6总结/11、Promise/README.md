# 11 、Promise与异步编程

> Promise 是异步编程的一种解决方案，比传统的解决方案——回调函数和事件——更合理和更强大。

回调事件的问题
- 回调地域，毁灭金字塔，不好维护
- 无法正常使用
- 无法正常检索堆栈信息
- 多个回调之间难以建立联系


所谓`Promise`，简单说就是一个容器，里面保存着某个未来才会结束的事件（通常是一个异步操作）的结果。从语法上说，Promise 是一个对象，从它可以获取异步操作的消息。Promise 提供统一的 API，各种异步操作都可以用同样的方法进行处理。

#### 1. Promise对象有三种状态：

`pending`（进行中）、`fulfilled`（已成功）和`rejected`（已失败）

Promise的起始状态是pending（进行中），执行成功状态会发生改变，成功为`fulfilled`（已成功），失败则变为`rejected`（已失败）。

在`fulfilled`（已成功）和`rejected`（已失败），可通过then()方法添加已成功处理程序,通过catch()方法添加拒绝处理程序。

#### 2. Promise对象有以下两个特点。

1. **对象的状态不受外界影响。**只有异步操作的结果，可以决定当前是哪一种状态，任何其他操作都无法改变这个状态。这也是`Promise`这个名字的由来，它的英语意思就是“承诺”，表示其他手段无法改变。
2. **一旦状态改变，就不会再变，任何时候都可以得到这个结果。**

#### 3. Promise对象的缺点

1. 无法取消`Promise`，一旦新建它就会立即执行，无法中途取消。
2. 如果不设置回调函数，`Promise`内部抛出的错误，不会反应到外部。
3. 当处于`pending`状态时，无法得知目前进展到哪一个阶段（刚刚开始还是即将完成）。



