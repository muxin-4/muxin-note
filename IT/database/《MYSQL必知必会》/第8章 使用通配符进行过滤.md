# 第8章 用使用通配符进行过滤

>    前面介绍的所有操作符都是针对已知值进行过滤的，这种过滤方法并不是任何时候都好用。怎样搜索产品名中包含文本anvil 的所有产品？

 用简单的比较操作符肯定不行，必须使用通配符。利用通配符可创建比较特定数据的搜索模式。

**注：**

通配符： 用来匹配值的一部分的特殊字符。

搜索模式： 由字面值、通配符或两者组合构成的搜索条件。

## 8.1 LIKE操作符

为在搜索子句中使用通配符，必须使用LIKE 操作符。LIKE 指示MySQL ，后跟的搜索模式利用通配符匹配而不是直接相等匹配进行比较。

### 8.1.1 百分号（%）通配符

最常使用的通配符是百分号（% ）。在搜索串中，% 表示任何字符出现任意次数 。例如，为了找出所有以词jet 起头的产品，可使用以下SELECT语句：

```
SELECT prod_id, prod_name
FROM products
WHERE prod_name LIKE 'jet%';
```

通配符可在搜索模式中任意位置使用，并且可以使用多个通配符。下面的例子使用两个通配符，它们位于模式的两端：

```
SELECT prod_id, prod_name
FROM products
WHERE prod_name LIKE '%anvil%'
```

**分析**

搜索模式'%anvil%' 表示匹配任何位置包含文本anvil的值，而不论它之前或之后出现什么字符 。



通配符也可以出现在**搜索模式的中间**，虽然这样做不太有用。下面的例子找出以s 起头以e 结尾的所有产品：

```
SELECT prod_name
FROM products
WHERE prod_name LIKE 's%e';
```

重要的是要注意到，除了一个或多个字符外，% 还能匹配0 个字符。%代表搜索模式中给定位置的0 个、1 个或多个字符。

### 8.1.2 下划线（_）通配符

另一个有用的通配符是下划线（_ ）。下划线的用途与% 一样，但下划线只匹配单个字符而不是多个字符。

```
SELECT prod_id, prod_name
FROM products
WHERE prod_name LIKE '_ ton anvil';
```

```
SELECT prod_id, prod_name
FROM products
WHERE prod_name LIKE '% ton anvil';
```

 与% 能匹配0 个字符不一样，_ 总是匹配一个字符，不能多也不能少。

## 8.2使用通配符的技巧

正如所见，MySQL 的通配符很有用。但这种功能是有代价的：通配符搜索的处理一般要比前面讨论的其他搜索所花时间更长。这里给出一些使用通配符要记住的技巧。

*  不要过度使用通配符。如果其他操作符能达到相同的目的，应该使用其他操作符。
*  在确实需要使用通配符时，除非绝对有必要，否则不要把它们用在搜索模式的开始处。把通配符置于搜索模式的开始处，搜索起来是最慢的。
*  仔细注意通配符的位置。如果放错地方，可能不会返回想要的数据。





























## 